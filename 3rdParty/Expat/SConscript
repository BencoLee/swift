Import(["env", "conf_env")

env["EXPAT_FLAGS"] = {
		"CPPDEFINES": ["XML_STATIC"],
		"CPPPATH": [Dir("src")],
		"LIBPATH": [Dir(".")],
		"LIBS": ["Expat"],
	}

myenv = env.Clone()
myenv.Append(CPPDEFINES = ["XML_STATIC", "HAVE_EXPAT_CONFIG_H"])
myenv.Append(CPPPATH = [".", "src"])

conf = Configure(conf_env)
if conf.CheckFunc('memmove') :
	myenv.Append(CPPDEFINES = ["HAVE_MEMMOVE"])
conf.Finish()

myenv.StaticLibrary("Expat", [
		"src/xmltok.c",
		"src/xmlparse.c",
		"src/xmlrole.c"
	])
