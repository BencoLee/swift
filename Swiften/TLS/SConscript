Import("swiften_env")

objects = swiften_env.StaticObject([
			"Certificate.cpp",
			"CertificateFactory.cpp",
			"CertificateTrustChecker.cpp",
			"TLSContext.cpp",
			"TLSContextFactory.cpp",
		])
		
myenv = swiften_env.Clone()
if myenv.get("HAVE_OPENSSL", 0) :
	myenv.MergeFlags(myenv["OPENSSL_FLAGS"])
	objects += myenv.StaticObject([
			"OpenSSL/OpenSSLContext.cpp",
			"OpenSSL/OpenSSLCertificate.cpp",
			"OpenSSL/OpenSSLContextFactory.cpp",
		])
	myenv.Append(CPPDEFINES = "HAVE_OPENSSL")

objects += myenv.StaticObject(["PlatformTLSFactories.cpp"])

		

swiften_env.Append(SWIFTEN_OBJECTS = [objects])
