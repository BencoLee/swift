UNITTEST_TARGET = Swiften/QA/UnitTest/checker
UNITTEST_SOURCES += \
	Swiften/QA/UnitTest/checker.cpp
UNITTEST_OBJECTS = \
	$(UNITTEST_SOURCES:.cpp=.o)

TEST_TARGETS += check

CLEANFILES += $(UNITTEST_OBJECTS) $(UNITTEST_TARGET)

.PHONY: check
check: $(UNITTEST_TARGET)
	$(TEST_RUNNER) ./$(UNITTEST_TARGET)

$(UNITTEST_TARGET): $(SWIFTEN_TARGET) $(CPPUNIT_TARGET) $(UNITTEST_OBJECTS) $(BUNDLED_LIBS)
	$(QUIET_LINK)$(CXX) -o $(UNITTEST_TARGET) $(UNITTEST_OBJECTS) $(LDFLAGS) $(SWIFTEN_TARGET) $(CPPUNIT_TARGET) $(BUNDLED_LIBS) $(LIBS)

